# Автоматизация тестирования Кинопоиск

Проект содержит 5 UI и 5 API автотестов для веб-приложения Кинопоиск.

## Особенности проекта

### Авторизация через QR-код
Вход в систему реализован через **полуавтоматическую авторизацию с использованием QR-кода**. Это связано с особенностями работы Яндекс ID, который использует двухфакторную аутентификацию.

**Процесс авторизации:**
1. Тест автоматически открывает страницу авторизации
2. Нажимает кнопку "Войти через QR-код"
3. **Требуется ручное действие:** Отсканировать QR-код в приложении Яндекс Браузер
4. После успешного сканирования тест автоматически закрывает попап "Дополнительный способ защиты" и продолжает выполнение

### Allure отчеты
Проект использует Allure для генерации детальных отчетов о тестировании:
- Визуализация результатов тестов
- Детальная информация о каждом шаге выполнения
- Скриншоты при падении тестов
- История выполнения тестов
- Анализ времени выполнения

### Важные детали:

**Для работы тестов необходимо:**
- Две учетной записи Яндекс с активной подпиской Плюс
- Мобильное приложение Яндекс Браузер с настроенным аккаунтом
- Камера с функцией сканирования QR-кода (альтернатива)

**Ручной шаг:**
- Cканирование QR-кода занимает до 1 минуты
- Если при запуске тестов появляется капча, её нужно пройти вручную (ещё ~1 минута)
- После многократных запусков тестов (входом в аккаунт) может пропасть выбор "Напомнить позже" и тест сломается — рекомендуется начать тест заного и использовать второй аккаунт

## Требования к окружению

### Предварительные условия:
- Python 3.9+
- Учетная запись Яндекс с доступом к Кинопоиску
- Камера на телефоне с функцией сканирования qr-кодов или Мобильное приложение Яндекс Браузер
- 30–60 секунд на ручное сканирование QR-кода при первом запуске
- Активная подписка Яндекс Плюс

## Установка

```bash
git clone https://github.com/VISKa666/kinopoisk-test-automation.git
cd kinopoisk-test-automation
pip install -r requirements.txt
```

## Настройка
Создайте файл .env в корне:

```text
x_api_key = ваш_апи_ключ
```

## Запуск тестов

### Все тесты:
```bash
pytest
```

### Только UI-тесты:
```bash
pytest -m ui
```

### Только API-тесты:
```bash
pytest -m api
```

### Генерация отчета:
```bash
pytest --alluredir=allure-results
allure generate allure-results -o allure-report --clean
allure open allure-report
```

## Ссылки
Финальная работа по ручному тестированию: https://homework-skypro.yonote.ru/share/a4a3711e-9676-445d-841a-d797d2dd9114
